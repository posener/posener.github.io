<!DOCTYPE html>
<html>
  <head>
    <title>{% if page.title %}{{ page.title }} - {% endif %}Eyal Posener's Blog</title>

    {% include meta.html %}

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/style.css" />
    <link rel="alternate" type="application/rss+xml" title="{{ site.name }} - {{ site.description }}" href="{{ site.baseurl }}/feed.xml" />
    <link rel="shortcut icon" type="image/png" href="/images/about.png">
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="{{ site.baseurl }}/" class="site-avatar"><img src="{{ site.avatar }}" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="{{ site.baseurl }}/">{{ site.name }}</a></h1>
            <p class="site-description">{{ site.description }}</p>
          </div>

          <nav>
              {% include svg-icons.html %}
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      {{ content }}
    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          {% include svg-icons.html %}
        </footer>
      </div>
    </div>

    {% include analytics.html %}

    <script>
        (function(){
            'use strict';

            /*
            Create intra-page links
            Requires that your headings already have an `id` attribute set (because that's what jekyll does)
            For every heading in your page, this adds a little anchor link `#` that you can click to get a permalink to the heading.
            Ignores `h1`, because you should only have one per page.
            The text content of the tag is used to generate the link, so it will fail "gracefully-ish" if you have duplicate heading text.
             */

            let headingNodes = [], results,
                    tags = ['h2', 'h3', 'h4', 'h5', 'h6'];

            tags.forEach(function(tag){
                results = document.getElementsByTagName(tag);
                Array.prototype.push.apply(headingNodes, results);
            });

            headingNodes.forEach(function(node){

                let img = document.createElement('img');
                img.src = '/images/pin.png';
                img.width = 15;

                let link = document.createElement('a');
                link.className = 'pageLink';
                link.href = '#' + node.getAttribute('id');
                link.appendChild(img);
                node.appendChild(link);
            });

        })();
    </script>
  </body>
</html>
